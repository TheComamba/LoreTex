
\begin{luacode*}
	dofile(RelativePath .. "/entities.lua")
	dofile(RelativePath .. "/entities-associations.lua")
	dofile(RelativePath .. "/entities-characters.lua")
	dofile(RelativePath .. "/entities-classes.lua")
	dofile(RelativePath .. "/entities-geography.lua")
	dofile(RelativePath .. "/entities-history.lua")
	dofile(RelativePath .. "/entities-items.lua")
	dofile(RelativePath .. "/entities-landmarks.lua")
	dofile(RelativePath .. "/entities-languages.lua")
	dofile(RelativePath .. "/entities-print.lua")
	dofile(RelativePath .. "/entities-processing.lua")
	dofile(RelativePath .. "/entities-species.lua")
	dofile(RelativePath .. "/entities-spells.lua")
	dofile(RelativePath .. "/entities-tex-api.lua")
	dofile(RelativePath .. "/entities-types.lua")
\end{luacode*}

\newcommand{\setDefaultLocation}[1]{
	\directlua{DefaultLocation = "#1"}
}

\newcommand{\resetCurrentLabels}{
	\setDefaultLocation{}
	\directlua{
		LogError("Use of deprecated function resetCurrentLabels.")
	}
}

\newcommand{\newEntity}[4]{
	\directlua{
		NewEntity("#1","#2", [[\detokenize{#3}]], [[\detokenize{#4}]])
	}
}

\newcommand{\newPlace}[3]{
	\newEntity{#1}{place}{#2}{#3}
}

\newcommand{\declarePC}[1]{
	\directlua{DeclarePC("#1")}
}

\newcommand{\newNPC}[3]{
	\directlua{
		NewCharacter("#1", [[\detokenize{#2}]], [[\detokenize{#3}]])
	}
}

\newcommand{\newGod}[3]{
	\newEntity{#1}{god}{#2}{#3}
	\setSpecies{gott}
}

\newcommand{\charappearance}[3]{
	\addDescriptor[Körper:]{Erscheinung}{#1}
	\addDescriptor[Kleidung und Ausrüstung:]{Erscheinung}{#2}
	\addDescriptor[Stimme / Verhalten:]{Erscheinung}{#3}
}

\newcommand{\newOrganisation}[3]{
	\newEntity{#1}{organisation}{#2}{#3}
}

\newcommand{\newFamily}[3]{
	\newEntity{#1}{family}{#2}{#3}
}

\newcommand{\newShip}[3]{
	\newEntity{#1}{ship}{#2}{#3}
}

\newcommand{\newSpecies}[3]{
	\newEntity{#1}{species}{#2}{#3}
}

\newcommand{\newLanguage}[3]{
	\newEntity{#1}{language}{#2}{#3}
}

\newcommand{\newClass}[2]{
	\newEntity{#1}{class}{}{#2}
}

\newcommand{\newSubclass}[2]{
	\newEntity{#1}{subclass}{}{#2}
}

\newcommand{\newSpell}[2]{
	\newEntity{#1}{spell}{}{#2}
}

\newcommand{\newSpellproperty}[2]{
	\newEntity{#1}{spell-property}{}{#2}
}

\newcommand{\spellProperties}[6]{
	\setAssociation{level-#1-spells}
	\setAssociation{#2-spells}
	\directlua{
		SetDescriptor(CurrentEntity(), "Properties", [[\detokenize{#1}]],"Level:")
		SetDescriptor(CurrentEntity(), "Properties", [[\detokenize{#2}]],"School:")
		SetDescriptor(CurrentEntity(), "Properties", [[\detokenize{#3}]],"Casting-time:")
		SetDescriptor(CurrentEntity(), "Properties", [[\detokenize{#4}]],"Range:")
		SetDescriptor(CurrentEntity(), "Properties", [[\detokenize{#5}]],"Components:")
		SetDescriptor(CurrentEntity(), "Properties", [[\detokenize{#6}]],"Duration:")
	}
}

\newcommand{\newForest}[3]{
	\newEntity{#1}{forest}{#2}{#3}
}

\newcommand{\newGrassland}[3]{
	\newEntity{#1}{grassland}{#2}{#3}
}

\newcommand{\newRange}[3]{
	\newEntity{#1}{range}{#2}{#3}
}

\newcommand{\newMountain}[3]{
	\newEntity{#1}{mountain}{#2}{#3}
}

\newcommand{\newRiver}[3]{
	\newEntity{#1}{river}{#2}{#3}
}

\newcommand{\newGlacier}[3]{
	\newEntity{#1}{glacier}{#2}{#3}
}

\newcommand{\newLake}[3]{
	\newEntity{#1}{lake}{#2}{#3}
}

\newcommand{\newItem}[3]{
	\newEntity{#1}{item}{#2}{#3}
}

\newcommand{\addDescriptor}[3][]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[\detokenize{#2}]],[[\detokenize{#3}]], [[\detokenize{#1}]])
	}
}

\newcommand{\setDescription}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[Beschreibung]],[[\detokenize{#1}]])
	}
}

\newcommand{\setEtymology}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[Etymologie]],[[\detokenize{#1}]])
	}
}

\newcommand{\setStats}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[Werte]],[[\detokenize{#1}]])
	}
}

\newcommand{\setSpells}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[Zauber]],[[\detokenize{#1}]])
	}
}

\newcommand{\setPlayer}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[Spieler]],[[\detokenize{#1}]])
	}
}

\newcommand{\setHeight}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),HeightCaption,[[\detokenize{#1}]])
	}
}

\newcommand{\setLocation}[1]{
	\directlua{SetDescriptor(CurrentEntity(), "location", "#1")}
}

\newcommand{\setAssociation}[2][]{
	\directlua{AddAssociation(CurrentEntity(), "#2", [[\detokenize{#1}]])}
}

\newcommand{\setSpecies}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[species]],[[\detokenize{#1}]])
	}
}

\newcommand{\setGender}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[gender]],[[\detokenize{#1}]])
	}
}

\newcommand{\setmale}{\setGender{Männlich}}
\newcommand{\setfemale}{\setGender{Weiblich}}

\newcommand{\setAgeFactor}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[ageFactor]],#1)
	}
}

\newcommand{\setAgeExponent}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[ageExponent]],#1)
	}
}

\newcommand{\setAgeModifierMixing}[2]{
	\directlua{
		SetAgeModifierMixing(CurrentEntity(),"#1","#2")
	}
}

\newcommand{\setMorphs}[1]{
	\directlua{
		SetDescriptor(CurrentEntity(),[[Morphen]],[[\detokenize{#1}]])
	}
}

\newcommand{\setSecret}{
	\directlua{SetSecret(CurrentEntity())}
}

\newcommand{\reveal}[1]{
	\directlua{Reveal("#1")}
}

\newcommand{\showSecrets}{
	\directlua{IsShowSecrets = true}
}

\newcommand{\automatedChapters}{
	\directlua{
		tex.print(AutomatedChapters())
	}
}

\newcommand{\automatedChaptersFUCKINGEVERYTHING}{
	\directlua{
		AddAllEntitiesToPrimaryRefs()
		tex.print(AutomatedChapters())
	}
}
